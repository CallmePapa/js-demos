<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise</title>
    <script>
        function test(resolve, reject) {
            let timeout = Math.random() * 2;
            log('set timeout to:' + timeout + 'seconds.');
            setTimeout(function () {
                if (timeout < 1) {
                    log('call resolve()...');
                    resolve('200 OK');
                }
                else {
                    log('call reject()...');
                    reject('timeout in' + timeout + 'seconds.');
                }
            }, timeout * 1000);
        }
        new Promise(test).then(function (result) {
            console.log('成功：' + result);
        }).catch(function (reason) {
            console.log('失败：' + reason);
        });
    </script>
</head>
<body>
<p id="test-promise2-log">
</p>
</body>
</html>